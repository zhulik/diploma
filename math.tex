\newpage
\section{Математическое и информационное обеспечение }

При проводке наклонной или горизонтальной скважины траектория бурения может не совпадать с проектным профилем скважины. Основная
задача технологии направленного бурения при этом заключается в оперативном расчёте величины и направления отклонения фактического профиля от
проектного и корректирование траектории бурения.

Помимо решения основной задачи по контролю и управлению траекторией бурения, расчёт пространственных координат и параметров фактического профиля необходим для:
\begin{itemize}
  \item исследования формы пространственно искривлённого ствола скважины с целью уточнения условий работы компоновок низа бурильной колонны;
  \item определения условий прохождения по стволу скважины бурильных и обсадных колонн;
  \item разработки мероприятий по предупреждению образования желобов в стенке ствола скважины;
  \item определения интервалов изнашивания обсадных колонн в процессе эксплуатации скважины.
\end{itemize}

Технология инклинометрии предусматривает измерение в каждой точке ствола скважины зенитного угла ($ \alpha $) и азимута ($ \varphi $), а также длины ствола от
устья скважины до каждой точки измерения. Задача расчёта траектории бурения состоит в том, чтобы на основании измерений рассчитать координаты
точек измерения в прямоугольной системе координат, связанной с устьем скважины, с точкой забуривания бокового ствола или с другой реперной
точкой. Другими словами, расчётным способом определить вертикальную глубину (Z) точки измерения, а также горизонтальные её смещения (X и Y) в
направлении Север-Юг с положительным направлением на Север и в направлении Восток-Запад с положительным направлением на Восток

\subsection{Математические модели подзадач}

\textbf{Метод среднего угла}

В данном методе интервал ($ L_{1-2} $) ствола скважины между соседними точками измерений представляется отрезком прямой. При этом зенитный угол
и азимут на протяжении данного интервала принимается равным средним арифметическим значениям соответствующих углов по концам интервала.
\begin{equation}
  \begin{split}
    \Delta x = L_{1-2} * sin \frac{\alpha_1 + \alpha_2}{2} * sin \frac{\varphi_1 + \varphi_2}{2};\\
    \Delta y = L_{1-2} * sin \frac{\alpha_1 + \alpha_2}{2} * cos \frac{\varphi_1 + \varphi_2}{2};\\
    \Delta z = L_{1-2} * cos \frac{\alpha_1 + \alpha_2}{2},
  \end{split}
\end{equation}

где $ \alpha_1 $ и $ \alpha_2 $ – зенитный угол в верхней и нижней точке измерения соответственно;\\
$ \varphi_1 $ и $ \varphi_2 $ – азимут в верхней и нижней точке измерения соответственно,\\
$ L_{1-2} $ - интервал ствола скважины между соседними точками измерений \cite{drilling}.

\textbf{Усреднение замеров}

Усреднение азимута и зенитного углов происходит методом нахождения простого среднего арифметического

\begin{equation}
  \begin{split}
    \alpha_{av}^d = \frac{\sum\limits_{i=1}^{n} \alpha_i^d}{n}\\
    \varphi_{av}^d = \frac{\sum\limits_{i=1}^{n} \varphi_i^d}{n}
  \end{split}
\end{equation}

где $ \alpha_{av}^d $ - усредненные зенитный угол для точки на глубине $d$;\\
$ \varphi_{av}^d $ - усредненный азимутный угол для точки на глубине $d$\\
$ n $ - количество замеров.

\textbf{Рассчет расстояний между стволами скважин}

Расстояние между точками замеров на заданной глубине вычисляется при помощи Евклидовой дистанции:

\begin{equation}
  distance^d = \sqrt{(X_1^d + X_2^d)^2 + (Y_1^d + Y_2^d)^2 + (Z_1^d + Z_2^d)^2 }
\end{equation}

где $ distance^d $ - расстояние между стволами на глубине $ d $;\\
$ X_1^d $, $ Y_1^d $ и $ Z_1^d $ - координаты точки замера первого ствола на глубине $ d $;\\
$ X_2^d $, $ Y_2^d $ и $ Z_2^d $ - координаты точки замера второго ствола на глубине $ d $.

\textbf{Вычисление координат точки с произвольной глубиной}

Измерительное оборудование работает дискретно, т.е. измеряет необходимые параметры не непрерывно, с некоторой частотой(каждые несколько метров
ствола скважины). Таким образом можно рассчитать только координаты точек замеров, предполагая, что между ними находятся отрезки прямой. Для вычисления
координат точек между точками замеров применяется уравнение прямой. Сначала находятся точки замеров, находящиеся выше и ниже искомой глубины. Затем
координаты рассчитываются по следующим формулам

\begin{equation}
  \begin{split}
    x_d = \frac{d-z_{top}}{(z_{bottom}-z_{top})}*(x_{bottom}-x_{top})+x_{top} \\
    y_d = \frac{d-z_{top}}{(z_{bottom}-z_{top})}*(y_{bottom}-y_{top})+y_{top}
  \end{split}
\end{equation}

где $ d $ - глубина;\\
$ x_d $ и $ y_d $ - координаты для глубины d; \\
$ z_{top} $ и $ y_{top} $ - координаты вышележащей точки замера;\\
$ z_{bottom} $ и $ y_{bottom} $ - координаты нижележащей точки замера.


\subsection{Информационная модель}

Информационная модель БД указана на \fullref{images/db.png}

\putimage{images/db.png}{
  Информационная модель
}

\subsection{Алгоритмы для подзадач}

\textbf{Алгоритм импорта замеров}

Алгоритм  замеров представлен на \fullref{schemes/averaging.png}

\putimage[0.4]{schemes/import.png}{
  Блок-схема алгоритма импорта замеров
}

\textbf{Алгоритм усреднения замеров}

Алгоритм усреднения замеров представлен на \fullref{schemes/averaging.png}

\putimage[0.75]{schemes/averaging.png}{
  Блок-схема алгоритма усреднения замеров
}

\textbf{Алгоритм расчета расстояний}

Алгоритм расчета расстояний представлен на \fullref{schemes/distance.png}

\putimage[0.8]{schemes/distance.png}{
  Блок-схема алгоритма расчета расстояний
}
